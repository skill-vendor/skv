# Verify command should succeed after sync.

mkdir workspace
cd workspace
exec skv init

exec git -C skillrepo -c init.defaultBranch=main init
exec git -C skillrepo add .
exec git -C skillrepo commit -m add-skill

exec skv add file://$WORK/workspace/skillrepo:skill-foo
exec skv sync

# Expected: verify succeeds and performs integrity checks.
exec skv verify

lockcmp skv.lock expected.lock.tmpl repo=skillrepo checksum=.skv/skills/skill-foo

-- workspace/skillrepo/skill-foo/SKILL.md --
---
name: skill-foo
description: demo skill
---
-- workspace/expected.lock.tmpl --
{
  "skills": [
    {
      "name": "skill-foo",
      "repo": "__REPO__",
      "path": "skill-foo",
      "commit": "__COMMIT__",
      "checksum": "__CHECKSUM__"
    }
  ]
}
