# Local skill entries should be accepted and linked.

mkdir workspace
cd workspace
exec skv init
cp skv.cue.tmpl skv.cue

# Expected: sync vendors and links local skills without fetching.
exec skv sync

exists .skv/skills/local-skill/SKILL.md
exec readlink .codex/skills/local-skill
stdout '^\.\./\.\./\.skv/skills/local-skill$'
exec readlink .claude/skills/local-skill
stdout '^\.\./\.\./\.skv/skills/local-skill$'
exec readlink .opencode/skill/local-skill
stdout '^\.\./\.\./\.skv/skills/local-skill$'

lockcmp skv.lock expected.lock.tmpl local=./local-skill checksum=.skv/skills/local-skill

-- workspace/local-skill/SKILL.md --
---
name: local-skill
description: local
---
-- workspace/skv.cue.tmpl --
skv: {
  skills: [
    {
      name: "local-skill"
      local: "./local-skill"
    },
  ]
}
-- workspace/expected.lock.tmpl --
{
  "skills": [
    {
      "name": "local-skill",
      "local": "__LOCAL__",
      "checksum": "__CHECKSUM__"
    }
  ]
}
