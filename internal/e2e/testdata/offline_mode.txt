# Offline mode should fail if a fetch is required.

mkdir workspace
cd workspace
exec skv init

exec git -C skillrepo -c init.defaultBranch=main init
exec git -C skillrepo add .
exec git -C skillrepo commit -m add-skill

exec skv add --no-sync file://$WORK/workspace/skillrepo:skill-foo

# Expected: offline mode errors because the skill has not been vendored yet.
! exec skv sync --offline --quiet

# Lock should remain at the initialized empty state.
cmp skv.lock expected.lock.tmpl

-- workspace/skillrepo/skill-foo/SKILL.md --
---
name: skill-foo
description: demo skill
---
-- workspace/expected.lock.tmpl --
{
  "skills": []
}
